"use strict";const paramLinks=document.querySelectorAll(".get-link");paramLinks.length>0&&paramLinks.forEach(e=>{e.setAttribute("href",e.getAttribute("href")+window.location.search)});const footerBtn=document.querySelector(".footer__btn-trigger");footerBtn.addEventListener("click",()=>{footerBtn.classList.toggle("active"),footerBtn.classList.contains("active")?footerBtn.innerText="Скрыть":footerBtn.innerText="Регистрация";document.querySelector(".footer").classList.toggle("active"),document.body.classList.toggle("lock")});const html=document.documentElement,canvas1=document.getElementById("canvas1"),sceneOne=document.querySelector(".scene-one"),hero=document.querySelector(".hero");let margin1=hero.scrollHeight;const sceneTwo=document.querySelector(".scene-two"),canvas2=document.getElementById("canvas2");let margin2=sceneOne.scrollHeight+hero.scrollHeight;const canvas3=document.getElementById("canvas3"),sceneThree=document.querySelector(".scene-three");let margin3=sceneOne.scrollHeight+hero.scrollHeight+sceneTwo.scrollHeight;const canvas4=document.getElementById("canvas4"),sticky=document.querySelector(".sticky");function getCanvas(e,t,n,o,c,i,s,a){const r=e.getContext("2d"),l=e=>`${s}/${e.toString().padStart(4,"0")}.${a}`,m=new Image;m.src=l(1),e.width=t,e.height=n,m.onload=function(){r.drawImage(m,0,0)};window.addEventListener("scroll",()=>{const e=(html.scrollTop-c)/(o.scrollHeight-window.innerHeight),t=Math.min(i-1,Math.ceil(e*i));requestAnimationFrame(()=>{return t>0&&(e=t+1,m.src=l(e),void r.drawImage(m,0,0));var e})}),(()=>{for(let e=1;e<i;e++){(new Image).src=l(e)}})()}getCanvas(canvas1,600,1080,sceneOne,margin1,23,"../img/scene1/animation1","jpg"),getCanvas(canvas2,600,1080,sceneTwo,margin2,32,"../img/scene2/animation2","jpg"),getCanvas(canvas3,350,220,sceneTwo,margin2,9,"../img/scene2/animation3","svg"),getCanvas(canvas4,1920,1080,sceneThree,margin3,18,"../img/scene3/animation4","jpg");const controller=new ScrollMagic.Controller,firstScene=new TimelineMax;firstScene.to(".player-info",5,{opacity:1}).to(".player-info",5,{opacity:0},"+=1").from(".scene-one__box",10,{left:"-100%"}).from(".scene-one__content",30,{y:"400%"},"-=30").to(".scene-one__title",6,{scale:.8,y:"0"}).to(".scene-title__num_1",6,{opacity:0},"-=6").from(".scene-one__list",6,{opacity:0,y:"30%"}).set(".scene-list__item",{className:"+=scene-list__item active"},"-=.5").set(".scene-one__box",{zIndex:10}).to(".scene-one__box",12,{left:0,width:"700px",height:"147",y:"100%"}).to(".scene-one__title",6,{y:"-13%"},"-=12").to(".scene-one__box-title",6,{opacity:1,x:0}).to(".scene-one__box",6,{height:"650px",top:"-128%"}).to(".scene-one__box-title",6,{y:"30%"}).to(".scene-one__box-num",6,{opacity:1,y:"30%"}).set(".scene-two",{marginTop:"-50%"},"+=.5");const scene1=new ScrollMagic.Scene({triggerElement:".scene-one-trigger",triggerHook:100,duration:"100%"}).setTween(firstScene).setPin(".scene-one-trigger").addIndicators().addTo(controller),secondScene=new TimelineMax;secondScene.to(".scene-two__title",2,{x:0}).to(".scene-title__num_2",2,{opacity:0},"-=2").to(".scene-two__list",1,{y:0,opacity:1}).set(".scene-list__item",{className:"+=scene-list__item active"},"-=.5").to(".canvas3",10,{scale:10,transformOrigin:"center top",x:"300%",y:"-300%"});const scene2=new ScrollMagic.Scene({triggerElement:".scene-two-trigger",triggerHook:50,duration:"100%"}).setTween(secondScene).setPin(".scene-two-trigger").addIndicators().addTo(controller);function init(){new SmoothScroll(document,60,12)}function SmoothScroll(e,t,n){e===document&&(e=document.scrollingElement||document.documentElement||document.body.parentNode||document.body);var o=!1,c=e.scrollTop,i=e===document.body&&document.documentElement?document.documentElement:e;function s(n){n.preventDefault();var s=function(e){return e.detail?e.wheelDelta?e.wheelDelta/e.detail/40*(e.detail>0?1:-1):-e.detail/3:e.wheelDelta/120}(n);c+=-s*t,c=Math.max(0,Math.min(c,e.scrollHeight-i.clientHeight)),o||a()}function a(){o=!0;var t=(c-e.scrollTop)/n;e.scrollTop+=t,Math.abs(t)>.5?r(a):o=!1}e.addEventListener("mousewheel",s,{passive:!1}),e.addEventListener("DOMMouseScroll",s,{passive:!1});var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,20)}}function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}init(),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));