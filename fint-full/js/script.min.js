"use strict";const paramLinks=document.querySelectorAll(".get-link");paramLinks.length>0&&paramLinks.forEach(e=>{e.setAttribute("href",e.getAttribute("href")+window.location.search)});const footerBtn=document.querySelector(".footer__btn-trigger");footerBtn.addEventListener("click",()=>{footerBtn.classList.toggle("active"),footerBtn.classList.contains("active")?footerBtn.innerText="Скрыть":footerBtn.innerText="Регистрация";document.querySelector(".footer").classList.toggle("active"),document.body.classList.toggle("lock")});const html=document.documentElement,canvas=document.getElementById("canvas1"),context=canvas.getContext("2d"),sceneOne=document.querySelector(".scene-one"),hero=document.querySelector(".hero"),sticky=document.querySelector(".sticky"),frameCount=23,currentFrame=e=>`../img/scene1/animation1/${e.toString().padStart(4,"0")}.jpg`,preloadImages=()=>{for(let e=1;e<23;e++){(new Image).src=currentFrame(e)}},img=new Image;img.src=currentFrame(1),canvas.width=600,canvas.height=1080,img.onload=function(){context.drawImage(img,0,0)};const updateImage=e=>{img.src=currentFrame(e),context.drawImage(img,0,0)};window.addEventListener("scroll",()=>{!function(e){let t=e.getBoundingClientRect().top;0===t||t<0?(e.style.opacity=1,e.style.pointerEvents="all"):(e.style.opacity=0,e.style.pointerEvents="none"),console.log(t)}(sticky);const e=(html.scrollTop-hero.scrollHeight)/(sceneOne.scrollHeight-window.innerHeight),t=Math.min(22,Math.ceil(23*e));requestAnimationFrame(()=>{return t>0&&(e=t+1,img.src=currentFrame(e),void context.drawImage(img,0,0));var e})}),preloadImages();const controller=new ScrollMagic.Controller,firstScene=new TimelineMax;firstScene.to(".player-info",5,{opacity:1}).to(".player-info",5,{opacity:0},"+=1").from(".scene-one__box",10,{left:"-100%"}).from(".scene-one__content",30,{y:"400%"},"-=30").to(".scene-title",6,{scale:.8,y:"0"}).to(".scene-title__num",6,{opacity:0},"-=6").from(".scene-list",6,{opacity:0,y:"30%"}).set(".scene-one__box",{zIndex:10}).to(".scene-one__box",12,{left:0,width:"700px",height:"147",y:"100%"}).to(".scene-title",6,{y:"-13%"},"-=12").to(".scene-one__box-title",6,{opacity:1,x:0}).to(".scene-one__box",6,{height:"700px",top:"-146%"}).to(".scene-one__box-title",6,{y:"30%"}).to(".scene-one__box-num",6,{opacity:1,y:"30%"});const scene1=new ScrollMagic.Scene({triggerElement:".scene-one-trigger",triggerHook:100,duration:"100%"}).setTween(firstScene).setPin(".scene-one__wrapper").addIndicators().addTo(controller);function init(){new SmoothScroll(document,60,12)}function SmoothScroll(e,t,n){e===document&&(e=document.scrollingElement||document.documentElement||document.body.parentNode||document.body);var o=!1,c=e.scrollTop,i=e===document.body&&document.documentElement?document.documentElement:e;function r(n){n.preventDefault();var r=function(e){return e.detail?e.wheelDelta?e.wheelDelta/e.detail/40*(e.detail>0?1:-1):-e.detail/3:e.wheelDelta/120}(n);c+=-r*t,c=Math.max(0,Math.min(c,e.scrollHeight-i.clientHeight)),o||a()}function a(){o=!0;var t=(c-e.scrollTop)/n;e.scrollTop+=t,Math.abs(t)>.5?s(a):o=!1}e.addEventListener("mousewheel",r,{passive:!1}),e.addEventListener("DOMMouseScroll",r,{passive:!1});var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,20)}}function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}init(),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));