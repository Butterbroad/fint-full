"use strict";document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".get-link");e.length>0&&e.forEach(e=>{e.setAttribute("href",e.getAttribute("href")+window.location.search)});const t=document.querySelector(".footer__btn-trigger");t.addEventListener("click",()=>{t.classList.toggle("active"),t.classList.contains("active")?t.innerText="Скрыть":t.innerText="Регистрация";document.querySelector(".footer").classList.toggle("active"),document.body.classList.toggle("lock")});const o=document.documentElement,n=document.getElementById("canvas1"),i=n.getContext("2d"),c=document.querySelector(".scene-one"),r=document.querySelector(".hero"),a=e=>`../img/scene1/animation1/${e.toString().padStart(4,"0")}.jpg`,l=new Image;l.src=a(1),n.width=600,n.height=1080,l.onload=function(){i.drawImage(l,0,0)};window.addEventListener("scroll",()=>{const e=(o.scrollTop-r.scrollHeight)/(c.scrollHeight-window.innerHeight),t=Math.min(22,Math.ceil(23*e));requestAnimationFrame(()=>{return e=t+1,l.src=a(e),void i.drawImage(l,0,0);var e})}),(()=>{for(let e=1;e<23;e++){(new Image).src=a(e)}})();const s=new ScrollMagic.Controller,d=new TimelineMax;d.to(".player-info",5,{opacity:1}).to(".player-info",5,{opacity:0},"+=1").from(".scene-one__box",10,{left:"-100%"}).from(".scene-one__content",30,{y:"400%"},"-=30").to(".scene-title",6,{scale:.8,y:"0"}).to(".scene-title__num",6,{opacity:0},"-=6").from(".scene-list",6,{opacity:0,y:"30%"}).set(".scene-one__box",{zIndex:10}).to(".scene-one__box",12,{left:0,width:"700px",height:"147",y:"100%"}).to(".scene-title",6,{y:"-13%"},"-=12").to(".scene-one__box-title",6,{opacity:1,x:0}).to(".scene-one__box",6,{height:"700px",top:"-146%"}).to(".scene-one__box-title",6,{y:"30%"}).to(".scene-one__box-num",6,{opacity:1,y:"30%"});new ScrollMagic.Scene({triggerElement:".scene-one-trigger",triggerHook:100,duration:"100%"}).setTween(d).setPin(".scene-one__wrapper").addIndicators().addTo(s);function m(e,t,o){e===document&&(e=document.scrollingElement||document.documentElement||document.body.parentNode||document.body);var n=!1,i=e.scrollTop,c=e===document.body&&document.documentElement?document.documentElement:e;function r(o){o.preventDefault();var r=function(e){return e.detail?e.wheelDelta?e.wheelDelta/e.detail/40*(e.detail>0?1:-1):-e.detail/3:e.wheelDelta/120}(o);i+=-r*t,i=Math.max(0,Math.min(i,e.scrollHeight-c.clientHeight)),n||a()}function a(){n=!0;var t=(i-e.scrollTop)/o;e.scrollTop+=t,Math.abs(t)>.5?l(a):n=!1}e.addEventListener("mousewheel",r,{passive:!1}),e.addEventListener("DOMMouseScroll",r,{passive:!1});var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,20)}}var u,g;new m(document,60,12),u=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(g=new Image).onload=g.onerror=function(){u(2==g.height)},g.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});